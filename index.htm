<script>
  // Get documentKey from the URL (e.g., ?documentKey=XYZ...)
  const urlParams = new URLSearchParams(window.location.search);
  const documentKey = urlParams.get("documentKey");

  const apiUrl = `https://9b6d-106-219-166-118.ngrok-free.app/esignature/api/webform/formdata?documentKey=${encodeURIComponent(documentKey)}`;

  fetch(apiUrl, {
    headers: {
      "ngrok-skip-browser-warning": "true"
    }
  })
  .then(response => {
    if (!response.ok) {
      throw new Error("Network response was not ok");
    }
    return response.json();
  })
  .then(data => {
    const container = document.getElementById("formDataContainer");
    container.innerHTML = `
      <p><strong>Name:</strong> ${data.name}</p>
      <p><strong>Email:</strong> ${data.email}</p>
      <p><strong>Office:</strong> ${data.office}</p>
      <p><strong>Case ID:</strong> ${data.caseId}</p>
    `;
  })
  .catch(error => {
    console.error("Error:", error);
    document.getElementById("formDataContainer").innerText = "Could not load form data. Please try again later.";
  });
</script>
